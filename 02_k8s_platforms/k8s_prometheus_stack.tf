# resource "kubernetes_namespace" "prometheus_stack" {
#   provider = kubernetes.aks-module
#   metadata {
#     name = "monitoring"
#   }
# }

# # https://github.com/prometheus-community/helm-charts/tree/main/charts/kube-prometheus-stack
# resource "helm_release" "prometheus_stack" {
#   provider   = helm.aks-module
#   name       = "prometheus-stack"
#   repository = "https://prometheus-community.github.io/helm-charts"
#   chart      = "kube-prometheus-stack"
#   namespace  = kubernetes_namespace.prometheus_stack.metadata[0].name

#   set {
#     name  = "grafana.ingress.enabled"
#     value = "true"
#   }
#   set {
#     name  = "grafana.ingress.ingressClassName"
#     value = "nginx"
#   }
#   set {
#     name  = "grafana.ingress.path"
#     value = "/(.*)" # "/grafana2/?(.*)"
#   }
#   # annotations:
#   #   nginx.ingress.kubernetes.io/ssl-redirect: "false"
#   #   nginx.ingress.kubernetes.io/use-regex: "true"
#   #   nginx.ingress.kubernetes.io/rewrite-target: /$1
#   set {
#     name  = "grafana.ingress.annotations.nginx\\.ingress\\.kubernetes\\.io/ssl-redirect"
#     value = "false"
#     type  = "string"
#   }
#   set {
#     name  = "grafana.ingress.annotations.nginx\\.ingress\\.kubernetes\\.io/use-regex"
#     value = "true"
#     type  = "string"
#   }
#   set {
#     name  = "grafana.ingress.annotations.nginx\\.ingress\\.kubernetes\\.io/rewrite-target"
#     value = "/$1"
#   }
#   set {
#     name  = "grafana.adminUser"
#     value = var.grafana_admin_user
#   }
#   set {
#     name  = "grafana.adminPassword"
#     value = var.grafana_admin_password
#   }
# }